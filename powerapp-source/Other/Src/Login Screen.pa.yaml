# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Login Screen:
    Properties:
      BackgroundImage: =Special_FD_scheme_for_senior_citizens_1692589190515_1692589190832
      Fill: =RGBA(255, 255, 255, 1)
      ImagePosition: =ImagePosition.Stretch
      LoadingSpinnerColor: =RGBA(0, 120, 212, 1)
      OnVisible: |+
        =Set(varResetLogin, true);
        Reset(ddBranch);
        Reset(txtPassword);
        Set(CurrentUser, Blank());
        Set(varUser, Blank());
    Children:
      - ScreenContainer2:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =RGBA(0, 0, 0, 0.26)
            Height: =767
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =50
            PaddingBottom: =16
            PaddingLeft: =16
            PaddingRight: =16.01
            PaddingTop: =16.01
            Width: =Parent.Width
            X: =0.00
          Children:
            - HeaderContainer2:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  Fill: =RGBA(255, 255, 255, 1)
                  FillPortions: =0
                  Height: =60
                  LayoutDirection: =LayoutDirection.Horizontal
                  PaddingRight: =0.00
                  PaddingTop: =0.00
                  RadiusBottomLeft: =8
                  RadiusBottomRight: =8
                  RadiusTopLeft: =8
                  RadiusTopRight: =8
                  Width: =1482.70
                  X: =17.78
                Children:
                  - Label5:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        AlignInContainer: =AlignInContainer.Center
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 0)
                        BorderStyle: =BorderStyle.None
                        BorderThickness: =2
                        Color: =RGBA(255, 255, 255, 1)
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        Fill: =RGBA(39, 113, 194, 1)
                        FillPortions: =1
                        FocusedBorderThickness: =4
                        Font: =Font.'Segoe UI'
                        FontWeight: =FontWeight.Bold
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =30.00
                        Text: ="Godavari Urban FD Commission Portal"
                        Width: =Parent.Width
                        X: =0.00
            - MainContainer2:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Start
                  DropShadow: =DropShadow.Bold
                  Fill: =RGBA(0, 0, 0, 0.45)
                  FillPortions: =0
                  Height: =500
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Vertical
                  LayoutGap: =20
                  LayoutJustifyContent: =LayoutJustifyContent.Center
                  LayoutMinHeight: =80
                  PaddingRight: =0.00
                  PaddingTop: =0.00
                  RadiusBottomLeft: =8
                  RadiusBottomRight: =8
                  RadiusTopLeft: =8
                  RadiusTopRight: =8
                  Width: =600
                  X: =17.78
                  Y: |+
                    =
                Children:
                  - ddBranch:
                      Control: Classic/DropDown@2.3.1
                      Properties:
                        BorderColor: =RGBA(245, 245, 245, 1)
                        ChevronBackground: =RGBA(245, 245, 245, 1)
                        ChevronDisabledBackground: =RGBA(242, 242, 241, 0)
                        ChevronDisabledFill: =RGBA(161, 159, 157, 1)
                        ChevronFill: =RGBA(50, 49, 48, 1)
                        ChevronHoverBackground: =RGBA(245, 245, 245, 1)
                        ChevronHoverFill: =RGBA(50, 49, 48, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Default: =
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        DisabledFill: =RGBA(242, 242, 241, 0)
                        Fill: =RGBA(245, 245, 245, 1)
                        Font: =Font.'Segoe UI'
                        HoverBorderColor: =RGBA(16, 110, 190, 1)
                        HoverColor: =RGBA(50, 49, 48, 1)
                        HoverFill: =RGBA(245, 245, 245, 1)
                        Items: |+
                          =Choices(EMPLOGINDATAFD.Branch_Code)
                        Items.Value: =Value
                        OnChange: |+
                          =Set(varResetLogin, false);
                        PaddingBottom: =5
                        PaddingLeft: =12
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        PressedBorderColor: =RGBA(16, 110, 190, 1)
                        PressedColor: =RGBA(255, 255, 255, 1)
                        PressedFill: =RGBA(0, 120, 212, 1)
                        SelectionColor: =RGBA(50, 49, 48, 1)
                        SelectionFill: =RGBA(0, 120, 212, 1)
                        Size: =13.00
                        Width: =328.00
                        X: =206.73
                        Y: =
                  - lblEmpName:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 0, 0, 0)
                        BorderStyle: =BorderStyle.None
                        BorderThickness: =2
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        FocusedBorderThickness: =4
                        Font: =Font.'Segoe UI'
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =13.00
                        Text: |+
                          =If(
                              varResetLogin || IsBlank(ddBranch.Selected) || IsBlank(ddBranch.Selected.Value),
                              "",
                              LookUp(
                                  'EMPLOGINDATAFD',
                                  Branch_Code.Value = ddBranch.Selected.Value && IsActive = true,
                                  Employee_Name
                              )
                          )
                        Width: =328.00
                        X: =206.73
                  - lblEmpCode:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 0, 0, 0)
                        BorderStyle: =BorderStyle.None
                        BorderThickness: =2
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledBorderColor: =RGBA(0, 0, 0, 0)
                        DisabledColor: =RGBA(161, 159, 157, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        FocusedBorderThickness: =4
                        Font: =Font.'Segoe UI'
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =13.00
                        Text: |+
                          =If(
                              varResetLogin || IsBlank(ddBranch.Selected) || IsBlank(ddBranch.Selected.Value),
                              "",
                              LookUp(
                                  'EMPLOGINDATAFD',
                                  Branch_Code.Value = ddBranch.Selected.Value && IsActive = true,
                                  Employee_Code
                              )
                          )
                        Width: =328.00
                        X: =206.73
                  - txtPassword:
                      Control: TextInput@0.0.54
                      Properties:
                        Align: =Align.Center
                        Height: =40
                        Placeholder: ="ENTER PASSWORD"
                        Type: ='TextInputCanvas.Type'.Password
                        Width: =328.00
                        X: =206.73
                  - btnLogin:
                      Control: Button@0.0.45
                      Properties:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        Height: =40
                        OnSelect: "=// 1. Look up the user based on Branch and Password inputs\r\nSet(\r\n    varUser,\r\n    LookUp(\r\n        'EMPLOGINDATAFD',\r\n        Branch_Code.Value = ddBranch.Selected.Value &&\r\n        Password = txtPassword.Value\r\n    )\r\n);\r\n\r\n// 2. Handle login result\r\nIf(\r\n    IsBlank(varUser),\r\n    // If no matching user is found\r\n    Notify(\"Invalid Branch or Password\", NotificationType.Error),\r\n    \r\n    // If a user is found\r\n    If(\r\n        varUser.IsActive = false,\r\n        // If the account is inactive\r\n        Notify(\"Your account is inactive. Contact Admin.\", NotificationType.Warning),\r\n        \r\n        // If the account is active: Set current user and navigate\r\n        Set(CurrentUser, varUser);\r\n        \r\n        // --- HO REDIRECTION LOGIC STARTS HERE ---\r\n        If(\r\n            varUser.Branch_Code.Value = \"Head Office\",\r\n            // If it's the Head Office user, navigate to the FD Payout Entries screen\r\n            Navigate(\r\n                'FD Payout Entries',\r\n                ScreenTransition.Fade\r\n            ),\r\n            \r\n            // Otherwise (Branch user), navigate to the Branch FD Payout Request view\r\n            Navigate(\r\n                'Branch FD Payout Request view',\r\n                ScreenTransition.Fade\r\n            )\r\n        )\r\n        // --- HO REDIRECTION LOGIC ENDS HERE ---\r\n    )\r\n)"
                        Text: ="LOGIN "
                        Width: =150.00
                        X: =305.66
                        Y: |+
                          =
      - Label2:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(161, 159, 157, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            FontWeight: =FontWeight.Bold
            Height: =58
            PaddingRight: =5.00
            PaddingTop: =5.00
            Size: =30.00
            Text: ="LOGIN PAGE "
            Width: =338.00
            X: =150
            Y: =153
      - Image2_2:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =4
            Height: =40
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverFill: =RGBA(0, 0, 0, 0)
            Image: ='images__2_-removebg-preview__1_-removebg-preview'
            PaddingRight: =0.00
            PaddingTop: =0.00
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedFill: =RGBA(0, 0, 0, 0)
            Width: =56.00
            X: =15.00
            Y: =25
      - ButtonCanvas4:
          Control: Button@0.0.45
          Properties:
            BasePaletteColor: =RGBA(227, 106, 244, 1)
            OnSelect: =Launch("https://www.intochat.ai/bubble-chat/cmi5p7z6x0004l804k0aiipmf")
            Text: ="AI ChatBox"
            Width: =156
            X: =627
            Y: =132
      - Label13:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            Color: =RGBA(50, 49, 48, 1)
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(161, 159, 157, 1)
            FocusedBorderThickness: =4
            Font: =Font.'Segoe UI'
            Text: |+
              =If(
                  varResetLogin || IsBlank(ddBranch.Selected) || IsBlank(ddBranch.Selected.Value),
                  "",
                  LookUp(
                      'EMPLOGINDATAFD',
                      Branch_Code.Value = ddBranch.Selected.Value && IsActive = true,
                      Password
                  )
              )
            X: =676
            Y: =300
